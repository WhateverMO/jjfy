数据成熟度评估项目采用结构良好的基于 Django 的架构，将 Web API 服务与核心评估算法分离。这种结构能够实现数据成熟度评估系统的可扩展开发和维护。

## 架构概览

![[Pasted image 20251104161852.png]]

## 目录结构

### 根目录级别

-   **README.md**: 项目文档，包含设置说明和输入/输出规范
-   **back/**: 主 Django 应用目录，包含所有后端组件

### 后端应用 (`back/`)

#### API 层 (`api/`)

API 层处理 HTTP 请求，并为评估系统提供 RESTful 端点：

| 文件 | 用途 | 主要功能 |
| --- | --- | --- |
| `views.py` | 请求处理器 | `get_table_names()`, `get_table()`, `er()`, `eval()` |
| `urls.py` | URL 路由 | 将端点映射到视图函数 |
| `models.py` | 数据库模型 | 目前为空，可扩展使用 |
| `externDB.py` | 外部数据库连接 | 管理 SQL Server 连接 |

API 提供六个主要端点 \[back/api/urls.py#L5-L13\]：

-   `/get_table_names` - 检索数据库表名
-   `/get_table` - 获取特定表数据
-   `/get_view_names` - 列出数据库视图
-   `/get_all_relations` - 获取表关系
-   `/er` - 生成 ER 图
-   `/eval` - 执行评估流程

#### 评估引擎 (`eval/`)

这是实现数据成熟度评估逻辑的核心算法组件：

| 组件 | 功能 | 描述 |
| --- | --- | --- |
| `eval.py` | 主流程 | 协调整个评估过程 |
| `weight_calc_method.py` | 权重算法 | 实现 BWM 和熵权法 |
| `question_2.py` | 问卷处理 | 处理问卷 2 的评分逻辑 |
| `model_score_cal_main.py` | 分数计算 | 计算层次化分数 |
| `generate_dict_main.py` | 输出格式化 | 构建最终结果 |

评估流程遵循六步过程 \[back/eval/eval.py#L38-L172\]：

1.  **问卷分割** - 随机分割问卷 1 数据
2.  **权重计算** - 根据问卷回答计算权重
3.  **权重聚合** - 应用 BWM 或熵方法
4.  **分数提取** - 处理问卷 2 获取第 3 级分数
5.  **层次化评分** - 计算第 1 级、第 2 级和模型分数
6.  **结果格式化** - 生成结构化输出字典

#### Django 配置 (`mysite/`)

标准 Django 项目配置：

-   **settings.py**: Django 设置，使用 SQLite 数据库 \[back/mysite/settings.py#L71-L75\]
-   **urls.py**: 根 URL 配置
-   **wsgi.py\/asgi.py**: Web 服务器接口

#### 数据库工具 (`sqlER/`)

用于数据库模式分析的专业组件：

-   **ERDiagram/**: ER 图生成工具
-   **connection/**: 数据库连接管理

## 技术栈

项目使用现代 Python Web 开发工具：

| 技术 | 版本 | 用途 |
| --- | --- | --- |
| Django | 5.2.4 | Web 框架 |
| NumPy | 2.2.6 | 数值计算 |
| SciPy | 1.15.3 | 科学计算 |
| Flask | 3.1.1 | 附加 Web 服务 |
| Graphviz | 0.21 | 图表生成 |

依赖通过 `uv` 包管理器管理，使用 `pyproject.toml` 配置 \[back/pyproject.toml#L9-L18\]。

## 数据流架构

![[Pasted image 20251104162030.png]]

## 关键设计模式

> [!NOTE]
> 评估引擎采用模块化设计，每个组件处理评估流程的特定方面。这使得可以轻松修改单个算法而不影响整个系统。

> [!NOTE]
> API 层与评估引擎的分离使核心算法可以独立于 Web 界面使用，便于测试和与其他系统集成。

## 下一步

要了解如何设置开发环境，请继续阅读 [4环境设置](入门指南/4环境配置) 。要了解预期的数据格式，请参见 [5数据输入格式](入门指南/5数据输入格式) 。有关评估算法的详细信息，请探索 [评估流程架构](深入探讨/核心评估引擎/评估流水线架构) 。