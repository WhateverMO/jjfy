本指南将指导你完成 Data Maturity Assessment 项目开发环境的搭建。该项目使用 Django 作为后端框架，并采用现代 Python 工具链进行依赖管理。

## 前置条件

开始之前，请确保已安装以下组件：

-   **Python 3.10+**: 项目依赖要求 [pyproject.toml](/back/pyproject.toml#L8)
-   **UV**: 现代化的 Python 包管理器，用于快速依赖安装和虚拟环境管理

## 项目架构概览

![[Pasted image 20251104162352.png]]

## 快速搭建流程

搭建过程遵循以下关键步骤：

克隆仓库

进入后端目录

安装依赖

初始化数据库

运行开发服务器

## 分步安装指南

![[Pasted image 20251104162417.png]]

### 1\. 进入后端目录

首先，切换到 Django 应用所在的后端目录：

```bash
cd back
```

后端目录包含完整的 Django 项目结构，包括评估引擎、API 层和数据库管理组件 [README.md](/README.md#L4-L6)。

### 2\. 安装依赖

使用 UV 同步并安装所有项目依赖：

```bash
uv sync
```

此命令会读取 [pyproject.toml](/back/pyproject.toml) 配置文件并安装所需包，包括：

| 包 | 版本 | 用途 |
| --- | --- | --- |
| Django | ≥5.2.4 | Web 框架 |
| NumPy | ≥2.2.6 | 数值计算 |
| SciPy | ≥1.15.3 | 科学计算 |
| pyodbc | ≥5.2.0 | 数据库连接 |
| Graphviz | ≥0.21 | ER 图生成 |
| Gunicorn | ≥23.0.0 | 生产服务器 |

### 3\. 数据库配置

项目默认使用 SQLite 数据库。配置定义在 [mysite/settings.py](/back/mysite/settings.py#L76-L81) 中：

```python
DATABASES = {
    'default': {
        'ENGINE': 'django.db.backends.sqlite3',
        'NAME': BASE_DIR / 'db.sqlite3',
    }
}
```

对于生产环境或外部数据库连接，你可以修改数据库设置。项目还通过 [sqlER/connection](/back/sqlER/connection/connection.py) 模块支持外部数据库。

### 4\. 初始化数据库

运行 Django 迁移以创建数据库模式：

```bash
uv run python manage.py migrate
```

此操作将应用所有待处理的迁移并初始化 Django 应用所需的数据库表。

### 5\. 创建超级用户（可选）

如需访问 Django 管理界面：

```bash
uv run python manage.py createsuperuser
```

### 6\. 运行开发服务器

启动 Django 开发服务器：

```bash
uv run python manage.py runserver
```

服务器将在 `http://127.0.0.1:8000/` 上可用，具体配置在 [ALLOWED\_HOSTS](/back/mysite/settings.py#L28) 设置中定义。

## 核心环境组件

### 评估引擎

评估引擎位于 [eval/](/back/eval/) 目录，包含：

-   **权重计算方法**: BWM 方法和熵权法 [weight\_calc\_method.py](/back/eval/weight_calc_method.py)
-   **分数处理**: 模型评分算法 [model\_score\_cal\_main.py](/back/eval/model_score_cal_main.py)
-   **问卷分析**: 不同问卷类型的处理逻辑 [question\_2.py](/back/eval/question_2.py)

### API 层

Django API 层提供用于数据处理和评估结果的 REST 端点，位于 [api/](/back/api/) 目录。

### 数据库连接

对于外部数据库连接，项目包含一个全面的数据库连接管理器 [sqlER/connection/connection.py](/back/sqlER/connection/connection.py)，支持：

-   通过 pyodbc 支持多种数据库类型
-   模式分析和表内省
-   主外键关系检测
-   ER 图生成功能

## 开发工作流

环境搭建完成后，你可以：

1.  **访问 API 端点**：`http://127.0.0.1:8000/api/`
2.  **使用 Django 管理**：`http://127.0.0.1:8000/admin/`（如已创建超级用户）
3.  **运行评估脚本**：从 eval 目录执行
4.  **测试数据库连接**：使用 sqlER 模块

> [!NOTE]
> 项目使用 UV 进行依赖管理，相比传统 pip 提供显著更快的安装速度。`uv.lock` 文件确保在不同环境中的可复现构建。

## 后续步骤

完成环境搭建后，你可能需要：

-   查看 [3项目结构](入门指南/3项目结构) 了解代码库组织
-   探索 [5数据输入格式](入门指南/5数据输入格式) 准备评估数据
-   深入了解 [评估流水线架构](深入探讨/核心评估引擎/评估流水线架构) 理解评估引擎工作原理

如需故障排除或高级配置，请参考 Django 文档和项目内的具体模块文档。