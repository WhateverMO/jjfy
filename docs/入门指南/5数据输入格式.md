本文档概述了数据成熟度评估系统所需的数据输入格式。该系统通过复杂的评估流程处理问卷响应，需要特定的数据结构以实现精确的评分和分析。

## 问卷数据结构

核心输入格式是组织为二维列表的问卷响应计数。每个内部列表代表单个问题在可用选项中的响应分布。

### 主要输入格式

```python
questionnaire_counts = [
    [2, 3],               
    [1, 0, 3, 1],     # 问题2：选项1-4分别有1、0、3、1个响应
    [2, 0, 1, 2],     # 问题3：选项1-4分别有2、0、1、2个响应
    # ... 更多问题
]
```

**关键特征：**

-   **单选题**：包含2个元素的列表，表示二选一
-   **多选题**：长度可变的列表（通常包含3-5个元素）
-   **基于索引**：系统中的问题从0开始索引
-   **响应计数**：每个元素代表该选项的响应数量

### 问题类型分类

系统根据列表长度自动区分问题类型：

-   **长度为2**：单选题（二元选择）
-   **长度大于2**：多选题

## 模块配置结构

问题被组织成模块以进行评分。模块结构通过问题索引分组来定义：

```python
SECTION_INDICES = [
    [0, 1, 2],        # 模块1：问题1-3
    [3, 4, 5],        # 模块2：问题4-6
    [6, 7, 8],        # 模块3：问题7-9
    # ... 更多模块
]
```

### 模块组织模式

根据系统配置 [question\_2.py](/back/eval/question_2.py#L56-L88)：

1.  **问题1-45**：每组3个问题组成一个模块（共15个模块）
2.  **问题46-62**：每个问题独立成模块（共17个模块）
3.  **问题63-77**：特殊分组，大小不一
4.  **问题78-79**：成对模块
5.  **问题80-121**：每组3个问题组成一个模块（共14个模块）
6.  **问题122-123**：成对模块
7.  **问题124-132**：每组3个问题组成一个模块（共3个模块）

## 评估参数

评估函数需要多个参数进行全面分析：

```python
def eval_qa(
    questionnaire_1_counts,    # 第一份问卷响应数据
    questionnaire_2_counts,    # 第二份问卷响应数据
    q1_section_1,             # 问卷1的模块分组（第一层级）
    q1_section_2,             # 问卷1的模块分组（第二层级）
    l1_names,                 # 第一层级类别名称
    l2_names,                 # 第二层级类别名称
    l3_names,                 # 第三层级类别名称
    q2_section,               # 问卷2的模块分组
    method="entropy"          # 权重计算方法
):
```

### 层级结构

系统支持三级层级结构来组织评估结果：

-   **第一层级**：8个主要类别（数据战略、数据生命周期、数据治理等）
-   **第二层级**：每个主要类别包含2-4个子类别
-   **第三层级**：每个子类别包含2-3个具体指标

## 数据验证要求

### 输入验证规则

1.  **问题索引有效性**：`SECTION_INDICES` 中的所有索引必须在 `questionnaire_counts` 范围内
2.  **非负计数**：所有响应计数必须是非负整数
3.  **一致的响应总数**：单选题应具有相似的总响应数以确保可靠的归一化

### 错误处理

系统包含验证检查，并为以下情况提供警告信息：

-   超出问卷长度的无效问题索引
-   缺少单选题（计算响应总数所必需）
-   空白或格式错误的输入数据

## 测试用例生成

系统包含用于生成可配置参数测试用例的工具 [test\_case.py](/back/eval/test_case.py#L98-L110)：

```python
def generate_qa_case(qa_sum, qa_config):
    qa_cases = []
    for config in qa_config:
        if type(config) is int:
            for _ in range(config):
                qa_line = random_sum_list(qa_sum, 3)
                qa_cases.append(qa_line)
        elif type(config) is list:
            cases_len, cases_num = config
            for _ in range(cases_len):
                qa_line = random_sum_list(qa_sum, cases_num)
                qa_cases.append(qa_line)
    return qa_cases
```

## 与评估流程的集成

输入数据被送入综合评估流程，包括：

1.  **问卷拆分**用于单个响应分析
2.  **分数计算**使用基于模块的分组
3.  **权重计算**使用熵权法或BWM等方法
4.  **层级聚合**跨越三级结构

有关评估过程的详细信息，请参阅 [评估流程架构](深入探讨/核心评估引擎/评估流水线架构) 。

## 后续步骤

要实现数据输入格式：

1.  将问卷响应数据准备成指定的二维列表格式
2.  根据问卷结构配置模块分组
3.  设置分层类别名称以组织结果
4.  选择适合评估需求的权重计算方法

有关特定评估方法的更多信息，请参阅 [权重计算算法](深入探讨/核心评估引擎/权重计算方法) 。